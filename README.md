# SQL演習問題



<br>

## 0 前提条件

### 0.1 MySQLのインストール

本演習では、MySQL8.0を使用します。事前にインストールしてください。

https://dev.mysql.com/downloads/mysql/

<br>

### 0.2 テーブル定義

次のテーブルをベースに演習を進めます。

<br>

**ITEM（商品テーブル）**

| # | 列名<br>（物理） | 列名<br>（論理） | データ型 | PK | UK | NN | FK | デフォルト | 備考 |
|:-:|:--|:--|:--|:-:|:-:|:-:|:--|:--|:--|
| 1 | ID | ID | INT | ● |  |  |  |  |  |
| 2 | NAME | 商品名 | VARCHAR(50) |  |  | ● |  |  |  |
| 3 | PRICE | 価格 | INT |  |  | ● |  |  |  |
| 4 | STATE | 状態 | VARCHAR(10) |  |  | ● |  |  | S、A、B、C、D |
| 5 | M_CAT_ID | 中カテゴリID | INT |  |  |  | M_CATEGORY(ID) |  |  |
| 6 | PUBLIC_FLG | 公開フラグ | TINYINT(1) |  |  | ● |  | 1:公開 | 0:非公開、1:公開 |
| 7 | SELLER_ID | 出品者ユーザID | INT |  |  | ● | USER(ID) |  |  |
| 8 | BUYER_ID | 購入者ユーザID | INT |  |  |  | USER(ID) |  |  |
| 9 | PURCHASE_DT | 購入日時 | DATETIME |  |  |  |  |  |  |
| 10 | UPDATED_DT | 更新日時 | DATETIME |  |  | ● |  | 現在日時 |  |

> PK: Primary Key（主キー）、UK: Unique Key（一意）、NN: Not Null、FK: Foreign Key（外部キー）

<br>

**GOOD（いいねテーブル）**

| # | 列名<br>（物理） | 列名<br>（論理） | データ型 | PK | UK | NN | FK | デフォルト | 備考 |
|:-:|:--|:--|:--|:-:|:-:|:-:|:--|:--|:--|
| 1 | ID | ID | INT | ● |  |  |  |  |  |
| 2 | ITEM_ID | 商品ID | INT |  |  | ● | ITEM(ID) |  |  |
| 3 | USER_ID | ユーザID | INT |  |  | ● | USER(ID) |  |  |
| 4 | UPDATED_DT | 更新日時 | DATETIME |  |  | ● |  | 現在日時 |  |

<br>

**USER（ユーザマスタ）**

| # | 列名<br>（物理） | 列名<br>（論理） | データ型 | PK | UK | NN | FK | デフォルト | 備考 |
|:-:|:--|:--|:--|:-:|:-:|:-:|:--|:--|:--|
| 1 | ID | ID | INT | ● |  |  |  |  |  |
| 2 | EMAIL | メールアドレス | VARCHAR(100) |  | ● | ● |  |  |  |
| 3 | PASSWORD | パスワード | VARCHAR(100) |  |  | ● |  |  |  |
| 4 | NICKNAME | ニックネーム | VARCHAR(50) |  |  | ● |  |  |  |
| 5 | REGION | 発送元地域 | VARCHAR(30) |  |  | ● |  |  | 都道府県名 |

<br>

**M_CATEGORY（中カテゴリマスタ）**

| # | 列名<br>（物理） | 列名<br>（論理） | データ型 | PK | UK | NN | FK | デフォルト | 備考 |
|:-:|:--|:--|:--|:-:|:-:|:-:|:--|:--|:--|
| 1 | ID | ID | INT | ● |  |  |  |  |  |
| 2 | NAME | カテゴリ名 | VARCHAR(50) |  | ● | ● |  |  |  |
| 3 | L_CAT_ID | 大カテゴリID | INT |  |  | ● | L_CATEGORY(ID) |  |  |

<br>

**L_CATEGORY（大カテゴリマスタ）**

| # | 列名<br>（物理） | 列名<br>（論理） | データ型 | PK | UK | NN | FK | デフォルト | 備考 |
|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|
| 1 | ID | ID | INT | ● |  |  |  |  |  |
| 2 | NAME | カテゴリ名 | VARCHAR(50) |  | ● | ● |  |  |  |

<br><br>

## 1 SQL演習

### 演習1

データベースの一覧を表示し、「freemarket」データベースがないことを確認してください。

<br>

### 演習2

「freemarket」データベースがなければ作成してください。

<br>

### 演習3

「freemarket」データベースに接続してください。

<br>

### 演習4

テーブル一覧を表示し、テーブルが1つもないことを確認してください。

**＜期待結果＞**

```sql
Empty set (0.00 sec)
```

<br>

### 演習5

以下のSQLファイルをダウンロードし、sourceコマンドを使用してデータの定義および挿入をしてください。

[SQLファイル](./sql/freemarket.sql)

<br>

### 演習6

商品テーブルから全データの全列を検索してください。

**＜期待結果＞**

| id | name  | price  | state | m_cat_id | public_flg | seller_id | buyer_id | purchase_dt | updated_dt          |
|--:|:--|--:|:--|--:|--:|--:|--:|:--|:--|
|  1 | ノートPC KroBook メモリ32GB SSD512GB | 200000 | A     |        1 |          1 |         5 |     NULL | NULL        | 2023-05-10 10:18:32 |
|  2 | 実践SQL 第2版                        |   1200 | D     |        5 |          1 |         7 |     NULL | NULL        | 2023-06-05 14:23:09 |
|  3 | レンズ ミラーレス一眼用 50mm F1.4    |  45000 | A     |        2 |          1 |         7 |     NULL | NULL        | 2023-05-15 07:03:54 |
|  4 | 黒いタブレット SIMフリー 64GB        |  32000 | B     |        1 |          0 |         3 |     NULL | NULL        | 2023-05-19 11:32:11 |
|  5 | タブレット 9.7インチ シリコンケース  |   3800 | S     |        1 |          1 |         3 |     NULL | NULL        | 2023-05-19 16:51:10 |
| ... | ...               |    |      |         |           |          |      |         |  |
（12件）

<br>

### 演習7

商品テーブルから全データのID、商品名、価格、更新日時を検索してください。

**＜期待結果＞**

| id | name                                 | price  | updated_dt          |
|---:|:--|--:|:--|
|  1 | ノートPC KroBook メモリ32GB SSD512GB | 200000 | 2023-05-10 10:18:32 |
|  2 | 実践SQL 第2版                        |   1200 | 2023-06-05 14:23:09 |
|  3 | レンズ ミラーレス一眼用 50mm F1.4    |  45000 | 2023-05-15 07:03:54 |
|  4 | 黒いタブレット SIMフリー 64GB        |  32000 | 2023-05-19 11:32:11 |
|  5 | タブレット 9.7インチ シリコンケース  |   3800 | 2023-05-19 16:51:10 |
| ... | ...               |    |  |
（12件）

